<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Adverse Music</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}

:root{
  --bg:#07070f;--bg2:#0d0d1c;--bg3:#131328;
  --card:#111120;--card2:#181830;--card3:#1e1e38;
  --border:rgba(255,255,255,0.06);--border2:rgba(255,255,255,0.1);
  --a1:#7c5cfc;--a2:#c45cfc;--a3:#5cf0fc;--a4:#fc5c8a;
  --gold:#f0c060;--green:#5cfc9a;
  --text:#f0eeff;--muted:rgba(240,238,255,0.45);--muted2:rgba(240,238,255,0.2);
  --r:16px;--rsm:10px;--nav:64px;--player:76px;
  --ease:cubic-bezier(0.32,0,0,1);
}

html,body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;height:100%;overflow:hidden;-webkit-font-smoothing:antialiased;touch-action:manipulation}

/* SHELL */
.shell{width:390px;height:844px;margin:0 auto;position:relative;overflow:hidden;background:var(--bg);display:flex;flex-direction:column}
@media(max-width:430px){.shell{width:100vw;height:100dvh}}

/* STATUS */
.status{height:44px;padding:14px 24px 0;display:flex;justify-content:space-between;align-items:center;flex-shrink:0;z-index:10;position:relative}
.status-time{font-family:'Syne',sans-serif;font-weight:800;font-size:13px}
.status-icons{display:flex;gap:5px;align-items:center}

/* SCREENS */
.screens{flex:1;position:relative;overflow:hidden}
.screen{position:absolute;inset:0;overflow-y:auto;overflow-x:hidden;padding-bottom:calc(var(--player) + var(--nav) + 24px);opacity:0;pointer-events:none;transition:opacity .35s var(--ease),transform .35s var(--ease);scrollbar-width:none;transform:translateX(40px)}
.screen::-webkit-scrollbar{display:none}
.screen.active{opacity:1;pointer-events:auto;transform:translateX(0)}
.screen.exit-left{transform:translateX(-40px);opacity:0}

/* MESH BG */
.mesh{position:fixed;top:-200px;left:-200px;width:700px;height:700px;pointer-events:none;z-index:0;opacity:.12;animation:meshDrift 14s ease-in-out infinite alternate}
@keyframes meshDrift{from{transform:translate(0,0) rotate(0deg)}to{transform:translate(50px,70px) rotate(25deg)}}

/* TYPOGRAPHY */
.syne{font-family:'Syne',sans-serif}
.screen-title{font-family:'Syne',sans-serif;font-size:28px;font-weight:800;letter-spacing:-.5px}
.section-label{font-family:'Syne',sans-serif;font-size:10px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--muted);padding:0 24px 14px}

/* HEADER */
.screen-header{padding:18px 24px 10px;display:flex;justify-content:space-between;align-items:center}
.hbtn{width:38px;height:38px;border-radius:50%;background:var(--card2);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s}
.hbtn:active{background:var(--card3)}

/* CARDS */
.h-scroll{display:flex;gap:14px;padding:0 24px;overflow-x:auto;scrollbar-width:none;-webkit-overflow-scrolling:touch}
.h-scroll::-webkit-scrollbar{display:none}

/* ALBUM CARD */
.album-card{flex-shrink:0;width:148px;cursor:pointer}
.album-art{width:148px;height:148px;border-radius:var(--r);margin-bottom:10px;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;font-size:52px;transition:transform .2s var(--ease)}
.album-card:active .album-art{transform:scale(.95)}
.album-art::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.06) 0%,transparent 60%)}
.album-name{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.album-artist{font-size:12px;color:var(--muted);margin-top:2px}

/* TRACK ROW */
.track-row{display:flex;align-items:center;gap:14px;padding:10px 24px;cursor:pointer;transition:background .15s;border-radius:var(--rsm)}
.track-row:active{background:var(--card)}
.track-num{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:var(--muted2);width:20px;text-align:center;flex-shrink:0}
.track-thumb{width:48px;height:48px;border-radius:var(--rsm);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:22px;position:relative}
.track-thumb.playing::after{content:'';position:absolute;inset:0;border-radius:inherit;background:rgba(124,92,252,.3);animation:trackPulse 1.5s ease-in-out infinite}
@keyframes trackPulse{0%,100%{opacity:1}50%{opacity:0}}
.track-info{flex:1;min-width:0}
.track-name{font-family:'Syne',sans-serif;font-size:14px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.track-artist{font-size:12px;color:var(--muted);margin-top:2px}
.track-dur{font-size:12px;color:var(--muted);flex-shrink:0}

/* SECTION */
.section{padding:0 0 26px}

/* FEATURED */
.featured{margin:0 24px 24px;border-radius:20px;height:200px;position:relative;overflow:hidden;cursor:pointer;transition:transform .2s var(--ease)}
.featured:active{transform:scale(.98)}
.feat-bg{position:absolute;inset:0;background:linear-gradient(135deg,#1a0533,#0a0a2e,#002233)}
.feat-orb{position:absolute;right:-20px;top:-20px;width:200px;height:200px;border-radius:50%;background:linear-gradient(135deg,var(--a1),var(--a2));opacity:.5;filter:blur(30px);animation:orbPulse 4s ease-in-out infinite}
@keyframes orbPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
.feat-art{position:absolute;right:20px;top:50%;transform:translateY(-50%) rotate(8deg);width:120px;height:120px;border-radius:16px;background:linear-gradient(135deg,#2a1060,#0d2040);display:flex;align-items:center;justify-content:center;font-size:52px;box-shadow:0 20px 60px rgba(0,0,0,.5)}
.feat-info{position:absolute;bottom:0;left:0;right:0;padding:18px;background:linear-gradient(to top,rgba(7,7,15,.98) 0%,transparent 100%)}
.feat-tag{display:inline-block;background:var(--a1);color:#fff;font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:3px 8px;border-radius:4px;margin-bottom:6px;font-family:'Syne',sans-serif}
.feat-title{font-family:'Syne',sans-serif;font-size:20px;font-weight:800}
.feat-sub{font-size:12px;color:var(--muted);margin-top:2px}
.feat-play{position:absolute;top:16px;right:16px;width:44px;height:44px;border-radius:50%;background:rgba(124,92,252,.9);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(8px);transition:transform .2s}
.feat-play:active{transform:scale(.9)}

/* RECENT */
.recent-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:0 24px}
.recent-chip{display:flex;align-items:center;gap:0;background:var(--card2);border-radius:var(--rsm);overflow:hidden;cursor:pointer;transition:transform .2s;border:1px solid var(--border)}
.recent-chip:active{transform:scale(.97)}
.recent-thumb{width:54px;height:54px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:24px}
.recent-chip-name{font-family:'Syne',sans-serif;font-size:12px;font-weight:700;padding:0 12px}

/* RADIO */
.radio-card{margin:0 24px 26px;border-radius:var(--r);padding:16px 18px;background:linear-gradient(135deg,rgba(124,92,252,.12),rgba(196,92,252,.08));border:1px solid rgba(124,92,252,.2);display:flex;align-items:center;gap:14px;cursor:pointer;transition:transform .2s}
.radio-card:active{transform:scale(.98)}
.radio-icon{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--a1),var(--a2));display:flex;align-items:center;justify-content:center;flex-shrink:0}
.radio-label{font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--a2);margin-bottom:3px;font-family:'Syne',sans-serif}
.radio-title{font-family:'Syne',sans-serif;font-size:16px;font-weight:800}
.radio-sub{font-size:12px;color:var(--muted);margin-top:2px}

/* WAVEFORM */
.waveform{display:flex;align-items:center;gap:3px;height:24px;margin-left:auto}
.wave-bar{width:3px;background:linear-gradient(to top,var(--a1),var(--a2));border-radius:2px}
.wave-bar.playing{animation:wave 1.2s ease-in-out infinite}
.wave-bar:nth-child(1){height:8px;animation-delay:0s}
.wave-bar:nth-child(2){height:16px;animation-delay:.1s}
.wave-bar:nth-child(3){height:12px;animation-delay:.2s}
.wave-bar:nth-child(4){height:20px;animation-delay:.3s}
.wave-bar:nth-child(5){height:10px;animation-delay:.4s}
.wave-bar:nth-child(6){height:18px;animation-delay:.15s}
.wave-bar:nth-child(7){height:8px;animation-delay:.25s}
@keyframes wave{0%,100%{transform:scaleY(1);opacity:.8}50%{transform:scaleY(1.9);opacity:1}}

/* ‚ïê‚ïê SEARCH SCREEN ‚ïê‚ïê */
.search-wrap{padding:0 24px 20px;position:relative}
.search-input-wrap{background:var(--card2);border:1.5px solid var(--border2);border-radius:var(--rsm);padding:0 16px;display:flex;align-items:center;gap:10px;transition:border-color .2s}
.search-input-wrap:focus-within{border-color:var(--a1)}
.search-input-wrap svg{flex-shrink:0;color:var(--muted)}
.search-input{flex:1;background:none;border:none;outline:none;color:var(--text);font-family:'DM Sans',sans-serif;font-size:15px;padding:13px 0;caret-color:var(--a1)}
.search-input::placeholder{color:var(--muted)}
.search-clear{width:28px;height:28px;border-radius:50%;background:var(--card3);border:none;color:var(--muted);display:none;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0}
.search-clear.visible{display:flex}

.genre-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:0 24px}
.genre-card{border-radius:var(--r);height:94px;display:flex;align-items:flex-end;padding:12px;position:relative;overflow:hidden;cursor:pointer;transition:transform .2s var(--ease)}
.genre-card:active{transform:scale(.96)}
.genre-name{font-family:'Syne',sans-serif;font-size:15px;font-weight:800;position:relative;z-index:1;text-shadow:0 2px 8px rgba(0,0,0,.5)}
.genre-emoji{position:absolute;top:10px;right:14px;font-size:30px}

/* Search results */
.search-results{padding:0 0 10px;animation:fadeUp .25s var(--ease)}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.results-label{font-family:'Syne',sans-serif;font-size:12px;font-weight:700;color:var(--muted);padding:8px 24px 12px;letter-spacing:1px;text-transform:uppercase}
.no-results{padding:40px 24px;text-align:center;color:var(--muted);font-size:14px}
.no-results .emoji{font-size:40px;display:block;margin-bottom:10px}

/* ‚ïê‚ïê LIBRARY ‚ïê‚ïê */
.lib-tabs{display:flex;gap:8px;padding:0 24px 20px;overflow-x:auto;scrollbar-width:none}
.lib-tabs::-webkit-scrollbar{display:none}
.lib-tab{flex-shrink:0;padding:8px 18px;border-radius:50px;font-size:13px;font-weight:600;font-family:'Syne',sans-serif;background:var(--card2);color:var(--muted);border:1px solid var(--border);cursor:pointer;transition:all .2s;white-space:nowrap}
.lib-tab.active{background:var(--a1);color:#fff;border-color:transparent}

.playlist-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;padding:0 24px}
.playlist-card{border-radius:var(--r);overflow:hidden;background:var(--card);border:1px solid var(--border);cursor:pointer;transition:transform .2s var(--ease)}
.playlist-card:active{transform:scale(.96)}
.playlist-art{height:134px;display:flex;align-items:center;justify-content:center;font-size:54px;position:relative;overflow:hidden}
.playlist-meta{padding:10px 12px 12px}
.playlist-title{font-family:'Syne',sans-serif;font-size:13px;font-weight:800}
.playlist-count{font-size:11px;color:var(--muted);margin-top:2px}
.art-grid{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;width:100%;height:100%}
.art-grid-cell{display:flex;align-items:center;justify-content:center;font-size:26px}

/* ‚ïê‚ïê ARTIST ‚ïê‚ïê */
.artist-hero{height:290px;position:relative;overflow:hidden;flex-shrink:0}
.artist-hero-bg{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:110px;filter:blur(24px);transform:scale(1.4);opacity:.35}
.artist-hero-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(7,7,15,.3) 0%,rgba(7,7,15,.92) 80%,var(--bg) 100%)}
.artist-hero-content{position:absolute;bottom:0;left:0;right:0;padding:20px 24px}
.artist-verified{display:inline-flex;align-items:center;gap:5px;font-size:11px;color:var(--a3);font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px}
.artist-hero-name{font-family:'Syne',sans-serif;font-size:38px;font-weight:800;letter-spacing:-1px;line-height:1}
.artist-stats{display:flex;gap:20px;margin-top:10px}
.artist-stat{font-size:12px;color:var(--muted)}
.artist-stat span{font-family:'Syne',sans-serif;font-weight:700;color:var(--text);display:block;font-size:15px}
.artist-actions{display:flex;gap:10px;margin-top:14px}
.btn-play-main{flex:1;background:linear-gradient(135deg,var(--a1),var(--a2));color:#fff;border:none;border-radius:50px;padding:13px;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;letter-spacing:.5px;transition:transform .15s}
.btn-play-main:active{transform:scale(.97)}
.btn-follow{padding:13px 22px;background:transparent;border:1.5px solid var(--border2);border-radius:50px;color:var(--text);font-family:'Syne',sans-serif;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s}
.btn-follow.following{border-color:var(--a1);color:var(--a1)}

/* ‚ïê‚ïê AUTH ‚ïê‚ïê */
.auth-screen{position:absolute;inset:0;background:var(--bg);z-index:600;display:flex;flex-direction:column;overflow-y:auto;padding-bottom:40px}
.auth-screen.hidden{display:none}
.auth-logo{font-family:'Syne',sans-serif;font-weight:800;font-size:32px;letter-spacing:-1px;background:linear-gradient(135deg,#fff 30%,var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-align:center}
.auth-tagline{color:var(--muted);font-size:14px;text-align:center;margin-top:6px}
.auth-hero{font-size:80px;text-align:center;margin:10px 0;animation:authFloat 3s ease-in-out infinite}
@keyframes authFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.auth-tabs{display:flex;background:var(--card2);border-radius:var(--rsm);padding:4px;margin:0 24px 28px}
.auth-tab{flex:1;padding:10px;text-align:center;font-family:'Syne',sans-serif;font-size:13px;font-weight:700;border-radius:8px;cursor:pointer;transition:all .2s;color:var(--muted)}
.auth-tab.active{background:var(--a1);color:#fff}
.auth-form{padding:0 24px;display:flex;flex-direction:column;gap:14px}
.input-wrap{position:relative}
.input-label{font-size:11px;font-weight:600;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:6px;font-family:'Syne',sans-serif;display:block}
.input-field{width:100%;background:var(--card2);border:1.5px solid var(--border);border-radius:var(--rsm);padding:14px 16px;color:var(--text);font-family:'DM Sans',sans-serif;font-size:15px;outline:none;transition:border-color .2s;caret-color:var(--a1)}
.input-field:focus{border-color:var(--a1)}
.input-field::placeholder{color:var(--muted2)}
.input-toggle{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--muted);cursor:pointer;padding:4px;display:flex;align-items:center}
.auth-btn{width:100%;padding:15px;background:linear-gradient(135deg,var(--a1),var(--a2));color:#fff;border:none;border-radius:var(--rsm);font-family:'Syne',sans-serif;font-size:15px;font-weight:800;cursor:pointer;letter-spacing:.5px;margin-top:6px;transition:transform .15s,opacity .15s;position:relative;overflow:hidden}
.auth-btn:active{transform:scale(.98)}
.auth-btn.loading::after{content:'';position:absolute;inset:0;background:rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center}
.auth-divider{display:flex;align-items:center;gap:14px;padding:4px 0;color:var(--muted);font-size:12px}
.auth-divider::before,.auth-divider::after{content:'';flex:1;height:1px;background:var(--border)}
.auth-social{display:flex;gap:12px}
.auth-social-btn{flex:1;padding:13px;background:var(--card2);border:1.5px solid var(--border);border-radius:var(--rsm);color:var(--text);font-family:'Syne',sans-serif;font-size:13px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:border-color .2s}
.auth-social-btn:hover{border-color:var(--border2)}
.auth-footer{text-align:center;font-size:13px;color:var(--muted);margin-top:6px}
.auth-footer a{color:var(--a1);text-decoration:none;font-weight:600}
.auth-error{background:rgba(252,92,138,.1);border:1px solid rgba(252,92,138,.3);border-radius:var(--rsm);padding:12px 16px;font-size:13px;color:#ff7a9a;display:none}
.auth-error.show{display:block;animation:fadeUp .2s var(--ease)}
.auth-success{background:rgba(92,252,154,.1);border:1px solid rgba(92,252,154,.3);border-radius:var(--rsm);padding:12px 16px;font-size:13px;color:var(--green);display:none}
.auth-success.show{display:block;animation:fadeUp .2s var(--ease)}

/* ‚ïê‚ïê MINI PLAYER ‚ïê‚ïê */
.mini-player-wrap{position:absolute;bottom:var(--nav);left:0;right:0;padding:0 10px;z-index:100;transition:transform .3s var(--ease)}
.mini-player-wrap.hidden{transform:translateY(calc(100% + var(--nav)))}
.mini-player{background:rgba(18,16,36,.95);backdrop-filter:blur(20px);border:1px solid rgba(124,92,252,.25);border-radius:16px;height:var(--player);display:flex;align-items:center;padding:0 14px;gap:12px;cursor:pointer;position:relative;overflow:hidden;transition:transform .15s}
.mini-player:active{transform:scale(.99)}
.mini-progress{position:absolute;bottom:0;left:0;height:2px;background:linear-gradient(to right,var(--a1),var(--a2));border-radius:2px;transition:width .5s linear}
.mini-thumb{width:48px;height:48px;border-radius:10px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:22px}
.mini-info{flex:1;min-width:0}
.mini-track{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mini-artist{font-size:12px;color:var(--muted)}
.mini-controls{display:flex;align-items:center;gap:6px}
.mini-btn{width:36px;height:36px;border-radius:50%;border:none;background:transparent;color:var(--text);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .15s;flex-shrink:0}
.mini-btn:active{transform:scale(.88)}
.mini-btn.play{background:var(--a1);width:40px;height:40px}

/* ‚ïê‚ïê FULL PLAYER ‚ïê‚ïê */
.full-player{position:absolute;inset:0;background:var(--bg);z-index:500;transform:translateY(100%);transition:transform .4s var(--ease);display:flex;flex-direction:column;overflow:hidden}
.full-player.open{transform:translateY(0)}
.fp-handle{width:36px;height:4px;background:var(--muted2);border-radius:2px;margin:14px auto 0;flex-shrink:0;cursor:pointer}
.fp-header{display:flex;align-items:center;justify-content:space-between;padding:14px 24px 0;flex-shrink:0}
.fp-header-label{font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--muted);font-family:'Syne',sans-serif}
.fp-art-wrap{flex:1;display:flex;align-items:center;justify-content:center;padding:20px 24px}
.fp-art{width:270px;height:270px;border-radius:24px;display:flex;align-items:center;justify-content:center;font-size:100px;box-shadow:0 40px 80px rgba(0,0,0,.6),0 0 60px rgba(124,92,252,.2);transition:transform .3s var(--ease)}
.fp-art.playing{animation:artFloat 4s ease-in-out infinite}
@keyframes artFloat{0%,100%{transform:translateY(0) rotate(-1deg)}50%{transform:translateY(-10px) rotate(1deg)}}
.fp-meta{padding:0 28px;flex-shrink:0}
.fp-track{font-family:'Syne',sans-serif;font-size:24px;font-weight:800;letter-spacing:-.5px}
.fp-artist{font-size:15px;color:var(--muted);margin-top:4px}
.fp-actions{display:flex;align-items:center;justify-content:space-between;margin-top:16px}
.fp-like{display:flex;align-items:center;gap:6px;color:var(--muted);font-size:13px;cursor:pointer;transition:color .2s;padding:6px;border-radius:8px}
.fp-like.liked{color:#ff5577}
.fp-like:active{transform:scale(.88)}
.fp-action-btn{padding:6px;color:var(--muted);cursor:pointer;transition:color .2s,transform .15s;display:flex;align-items:center;gap:6px;font-size:13px;border-radius:8px}
.fp-action-btn:active{transform:scale(.88)}
.fp-progress-wrap{padding:20px 28px 0;flex-shrink:0}
.fp-progress-bar{height:4px;background:var(--card2);border-radius:2px;cursor:pointer;position:relative}
.fp-progress-fill{height:100%;width:0%;background:linear-gradient(to right,var(--a1),var(--a2));border-radius:2px;position:relative;transition:width .5s linear}
.fp-progress-fill::after{content:'';position:absolute;right:-6px;top:50%;transform:translateY(-50%);width:13px;height:13px;border-radius:50%;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.4);opacity:0;transition:opacity .2s}
.fp-progress-bar:hover .fp-progress-fill::after{opacity:1}
.fp-times{display:flex;justify-content:space-between;margin-top:10px;font-size:12px;color:var(--muted);font-variant-numeric:tabular-nums}
.fp-controls{padding:18px 28px 8px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.fp-ctrl-btn{width:46px;height:46px;display:flex;align-items:center;justify-content:center;color:var(--muted);cursor:pointer;transition:color .2s,transform .15s;border-radius:50%}
.fp-ctrl-btn:active{transform:scale(.88)}
.fp-ctrl-btn.active{color:var(--a1)}
.fp-play-btn{width:68px;height:68px;border-radius:50%;background:linear-gradient(135deg,var(--a1),var(--a2));display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 8px 30px rgba(124,92,252,.5);transition:transform .15s}
.fp-play-btn:active{transform:scale(.93)}
.fp-extras{display:flex;justify-content:space-around;padding:0 28px 28px;flex-shrink:0}
.fp-extra-btn{display:flex;flex-direction:column;align-items:center;gap:5px;color:var(--muted);cursor:pointer;font-size:10px;font-weight:600;font-family:'Syne',sans-serif;letter-spacing:1px;text-transform:uppercase;transition:color .2s;padding:8px;border-radius:10px}
.fp-extra-btn:active{background:var(--card)}
.fp-extra-btn svg{width:22px;height:22px}

/* ‚ïê‚ïê NAV ‚ïê‚ïê */
.bottom-nav{height:var(--nav);display:flex;align-items:center;justify-content:space-around;background:rgba(8,8,18,.96);backdrop-filter:blur(20px);border-top:1px solid var(--border);flex-shrink:0;position:relative;z-index:200}
.nav-item{display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;padding:6px 18px;border-radius:12px;transition:all .15s;position:relative}
.nav-item:active{transform:scale(.9)}
.nav-item svg{width:22px;height:22px;stroke:var(--muted);transition:stroke .2s}
.nav-label{font-size:10px;font-weight:600;font-family:'Syne',sans-serif;color:var(--muted);letter-spacing:.5px;transition:color .2s}
.nav-item.active svg{stroke:var(--a1)}
.nav-item.active .nav-label{color:var(--a1)}
.nav-indicator{position:absolute;top:0;left:50%;transform:translateX(-50%);width:18px;height:2px;border-radius:1px;background:var(--a1);opacity:0;transition:opacity .2s}
.nav-item.active .nav-indicator{opacity:1}

/* USER BADGE */
.user-badge{display:flex;align-items:center;gap:8px;background:var(--card2);border:1px solid var(--border);border-radius:50px;padding:5px 14px 5px 5px;cursor:pointer}
.avatar{width:30px;height:30px;border-radius:50%;background:linear-gradient(135deg,var(--a1),var(--a2));display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;font-size:12px;color:#fff;flex-shrink:0}
.avatar-name{font-family:'Syne',sans-serif;font-size:12px;font-weight:700}

/* LOGO */
.logo{font-family:'Syne',sans-serif;font-weight:800;font-size:20px;letter-spacing:-.5px;background:linear-gradient(135deg,#fff 30%,var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}

/* NOTIF */
.notif-badge{position:absolute;top:-1px;right:-1px;width:8px;height:8px;border-radius:50%;background:var(--a4);border:2px solid var(--bg)}

/* TOAST */
.toast{position:absolute;bottom:calc(var(--player) + var(--nav) + 16px);left:50%;transform:translateX(-50%) translateY(20px);background:var(--card3);border:1px solid var(--border2);border-radius:50px;padding:10px 20px;font-family:'Syne',sans-serif;font-size:13px;font-weight:700;white-space:nowrap;z-index:400;opacity:0;transition:opacity .25s,transform .25s var(--ease);pointer-events:none}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* COLOR UTILS */
.c-purple{background:linear-gradient(135deg,#2a0a60,#14063a)}
.c-teal{background:linear-gradient(135deg,#0a4a4a,#04202a)}
.c-rose{background:linear-gradient(135deg,#5a0828,#280410)}
.c-gold{background:linear-gradient(135deg,#4a2a00,#201200)}
.c-green{background:linear-gradient(135deg,#0a3a18,#041a0c)}
.c-blue{background:linear-gradient(135deg,#081a5a,#040a28)}
.c-pink{background:linear-gradient(135deg,#4a0a3a,#20041a)}

.g-hiphop{background:linear-gradient(135deg,#2d0a4a,#120320)}
.g-afro{background:linear-gradient(135deg,#4a2000,#201000)}
.g-rnb{background:linear-gradient(135deg,#4a0028,#200010)}
.g-electronic{background:linear-gradient(135deg,#002a4a,#001020)}
.g-pop{background:linear-gradient(135deg,#4a003a,#20001a)}
.g-jazz{background:linear-gradient(135deg,#1a2a00,#0a1400)}
.g-gospel{background:linear-gradient(135deg,#3a2a00,#1a1200)}
.g-highlife{background:linear-gradient(135deg,#002a1a,#00100a)}

/* LOADING SPINNER */
.spinner{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;margin:0 auto}
@keyframes spin{to{transform:rotate(360deg)}}

/* ARTIST PILL */
.artist-pill{flex-shrink:0;display:flex;align-items:center;gap:10px;background:var(--card);border:1px solid var(--border);border-radius:50px;padding:8px 16px 8px 8px;cursor:pointer;transition:all .15s}
.artist-pill:active{transform:scale(.95);background:var(--card2)}
.artist-avatar{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}
.artist-pill-name{font-family:'Syne',sans-serif;font-size:13px;font-weight:700}

/* BACK BTN */
.back-btn{position:absolute;top:14px;left:16px;width:38px;height:38px;border-radius:50%;background:rgba(7,7,15,.6);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;border:1px solid var(--border);transition:transform .15s}
.back-btn:active{transform:scale(.9)}
</style>
</head>
<body>

<!-- MESH -->
<svg class="mesh" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <radialGradient id="m1" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="#7c5cfc"/><stop offset="100%" stop-color="transparent"/></radialGradient>
    <radialGradient id="m2" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="#c45cfc"/><stop offset="100%" stop-color="transparent"/></radialGradient>
    <radialGradient id="m3" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="#5cf0fc"/><stop offset="100%" stop-color="transparent"/></radialGradient>
  </defs>
  <ellipse cx="200" cy="150" rx="200" ry="180" fill="url(#m1)"/>
  <ellipse cx="350" cy="300" rx="150" ry="120" fill="url(#m2)"/>
  <ellipse cx="80" cy="320" rx="130" ry="110" fill="url(#m3)"/>
</svg>

<!-- ‚ïê‚ïê AUTH SCREEN ‚ïê‚ïê -->
<div class="auth-screen" id="auth-screen">
  <div style="padding:60px 24px 30px;text-align:center">
    <div class="auth-logo">Adverse</div>
    <div class="auth-tagline">Premium music for the culture üéµ</div>
    <div class="auth-hero">üéß</div>
  </div>

  <div class="auth-tabs" id="auth-tabs">
    <div class="auth-tab active" onclick="switchAuthTab('login')">Sign In</div>
    <div class="auth-tab" onclick="switchAuthTab('signup')">Create Account</div>
  </div>

  <!-- Login Form -->
  <div class="auth-form" id="login-form">
    <div class="auth-error" id="login-error">Invalid email or password. Try again.</div>
    <div>
      <label class="input-label">Email</label>
      <input class="input-field" type="email" id="login-email" placeholder="you@example.com" autocomplete="email">
    </div>
    <div class="input-wrap">
      <label class="input-label">Password</label>
      <input class="input-field" type="password" id="login-password" placeholder="Your password" autocomplete="current-password">
      <button class="input-toggle" onclick="togglePw('login-password',this)" type="button">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
      </button>
    </div>
    <button class="auth-btn" onclick="doLogin()" id="login-btn">Sign In</button>
    <div class="auth-divider">or continue with</div>
    <div class="auth-social">
      <button class="auth-social-btn" onclick="socialLogin('Google')">üåê Google</button>
      <button class="auth-social-btn" onclick="socialLogin('Apple')">üçé Apple</button>
    </div>
    <div class="auth-footer">Don't have an account? <a href="#" onclick="switchAuthTab('signup');return false">Sign up free</a></div>
  </div>

  <!-- Signup Form -->
  <div class="auth-form" id="signup-form" style="display:none">
    <div class="auth-error" id="signup-error">Please fill all fields correctly.</div>
    <div class="auth-success" id="signup-success">Account created! Signing you in... üéâ</div>
    <div>
      <label class="input-label">Full Name</label>
      <input class="input-field" type="text" id="signup-name" placeholder="Your name" autocomplete="name">
    </div>
    <div>
      <label class="input-label">Email</label>
      <input class="input-field" type="email" id="signup-email" placeholder="you@example.com" autocomplete="email">
    </div>
    <div class="input-wrap">
      <label class="input-label">Password</label>
      <input class="input-field" type="password" id="signup-password" placeholder="Min. 8 characters" autocomplete="new-password">
      <button class="input-toggle" onclick="togglePw('signup-password',this)" type="button">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
      </button>
    </div>
    <button class="auth-btn" onclick="doSignup()" id="signup-btn">Create Account</button>
    <div class="auth-divider">or continue with</div>
    <div class="auth-social">
      <button class="auth-social-btn" onclick="socialLogin('Google')">üåê Google</button>
      <button class="auth-social-btn" onclick="socialLogin('Apple')">üçé Apple</button>
    </div>
    <div class="auth-footer">Already have an account? <a href="#" onclick="switchAuthTab('login');return false">Sign in</a></div>
  </div>
</div>

<!-- ‚ïê‚ïê MAIN APP ‚ïê‚ïê -->
<div class="shell" id="main-app" style="display:none">

  <div class="status">
    <span class="status-time" id="status-time">9:41</span>
    <div class="status-icons">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" y1="20" x2="12.01" y2="20" stroke-width="3"/></svg>
      <svg width="22" height="12" viewBox="0 0 24 12"><rect x="1" y="1" width="18" height="10" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/><rect x="2" y="2" width="13" height="8" rx="1" fill="currentColor"/><path d="M21 4v4a2 2 0 0 0 0-4z" fill="currentColor"/></svg>
    </div>
  </div>

  <div class="screens">

    <!-- ‚ïê‚ïê HOME ‚ïê‚ïê -->
    <div class="screen active" id="screen-home">
      <div class="screen-header">
        <div>
          <div style="font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:2px;font-weight:500">Good evening</div>
          <div style="font-family:'Syne',sans-serif;font-size:26px;font-weight:800;margin-top:2px" id="home-greeting">Tunde <span style="background:linear-gradient(135deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent">‚ú¶</span></div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <div class="hbtn" style="position:relative">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
            <div class="notif-badge"></div>
          </div>
          <div class="user-badge" onclick="showToast('Profile coming in Phase 3!')">
            <div class="avatar" id="home-avatar">T</div>
            <span class="avatar-name" id="home-uname">Tunde</span>
          </div>
        </div>
      </div>

      <!-- Featured -->
      <div class="featured" onclick="playTrack(0)">
        <div class="feat-bg"></div>
        <div class="feat-orb"></div>
        <div class="feat-art">üî•</div>
        <div class="feat-info">
          <div class="feat-tag">‚ñ∂ Trending Now</div>
          <div class="feat-title">Afro Nocturnal</div>
          <div class="feat-sub">Burna Boy ¬∑ Wizkid ¬∑ Davido</div>
        </div>
        <div class="feat-play">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="white"><polygon points="5,3 19,12 5,21"/></svg>
        </div>
      </div>

      <!-- Adverse Radio -->
      <div class="radio-card" onclick="showToast('Adverse Radio ‚Äî coming Phase 3! üì°')">
        <div class="radio-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="2"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.49-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/></svg>
        </div>
        <div style="flex:1">
          <div class="radio-label">Adverse Radio</div>
          <div class="radio-title">AI Mood Station</div>
          <div class="radio-sub">Tailored to your vibe ¬∑ Live</div>
        </div>
        <div class="waveform" id="home-wave">
          <div class="wave-bar playing"></div><div class="wave-bar playing"></div><div class="wave-bar playing"></div>
          <div class="wave-bar playing"></div><div class="wave-bar playing"></div><div class="wave-bar playing"></div>
          <div class="wave-bar playing"></div>
        </div>
      </div>

      <!-- Recently Played -->
      <div class="section">
        <div class="section-label">Recently Played</div>
        <div class="recent-grid">
          <div class="recent-chip" onclick="playTrack(0)"><div class="recent-thumb c-purple">üåô</div><div class="recent-chip-name">Afrobeat Hits</div></div>
          <div class="recent-chip" onclick="playTrack(2)"><div class="recent-thumb c-rose">üé∂</div><div class="recent-chip-name">Late Night R&B</div></div>
          <div class="recent-chip" onclick="playTrack(4)"><div class="recent-thumb c-teal">üåø</div><div class="recent-chip-name">Focus Mode</div></div>
          <div class="recent-chip" onclick="showToast('‚ù§Ô∏è 248 Liked Songs')"><div class="recent-thumb c-gold">‚ú®</div><div class="recent-chip-name">Liked Songs</div></div>
        </div>
      </div>

      <!-- New Releases -->
      <div class="section">
        <div class="section-label">New Releases</div>
        <div class="h-scroll">
          <div class="album-card" onclick="playTrack(0)"><div class="album-art c-purple">üåô</div><div class="album-name">Midnight Lagos</div><div class="album-artist">Wizkid</div></div>
          <div class="album-card" onclick="playTrack(1)"><div class="album-art c-rose">üî•</div><div class="album-name">Twice As Tall II</div><div class="album-artist">Burna Boy</div></div>
          <div class="album-card" onclick="playTrack(2)"><div class="album-art c-teal">üíé</div><div class="album-name">A Good Time</div><div class="album-artist">Davido</div></div>
          <div class="album-card" onclick="playTrack(3)"><div class="album-art c-gold">üåä</div><div class="album-name">Waves</div><div class="album-artist">Mr Eazi</div></div>
          <div class="album-card" onclick="playTrack(4)"><div class="album-art c-green">üåø</div><div class="album-name">Soso EP</div><div class="album-artist">Omah Lay</div></div>
        </div>
      </div>

      <!-- Artists -->
      <div class="section">
        <div class="section-label">Artists For You</div>
        <div class="h-scroll">
          <div class="artist-pill" onclick="switchScreen('artist')"><div class="artist-avatar c-purple">üé§</div><div class="artist-pill-name">Wizkid</div></div>
          <div class="artist-pill" onclick="switchScreen('artist')"><div class="artist-avatar c-rose">üéµ</div><div class="artist-pill-name">Tems</div></div>
          <div class="artist-pill" onclick="switchScreen('artist')"><div class="artist-avatar c-teal">üé∏</div><div class="artist-pill-name">Rema</div></div>
          <div class="artist-pill" onclick="switchScreen('artist')"><div class="artist-avatar c-gold">üåü</div><div class="artist-pill-name">Ayra Starr</div></div>
          <div class="artist-pill" onclick="switchScreen('artist')"><div class="artist-avatar c-green">üé∂</div><div class="artist-pill-name">Asake</div></div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê SEARCH ‚ïê‚ïê -->
    <div class="screen" id="screen-search">
      <div class="screen-header"><div class="screen-title">Search</div></div>
      <div class="search-wrap">
        <div class="search-input-wrap">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input class="search-input" id="search-input" placeholder="Songs, artists, albums..." oninput="doSearch(this.value)" autocomplete="off" spellcheck="false">
          <button class="search-clear" id="search-clear" onclick="clearSearch()">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
      </div>

      <!-- Browse (shown when no query) -->
      <div id="browse-view">
        <div class="section-label" style="padding-top:4px">Browse Genres</div>
        <div class="genre-grid">
          <div class="genre-card g-hiphop" onclick="searchGenre('Hip-Hop')"><div class="genre-emoji">üé§</div><div class="genre-name">Hip-Hop</div></div>
          <div class="genre-card g-afro" onclick="searchGenre('Afrobeats')"><div class="genre-emoji">üåç</div><div class="genre-name">Afrobeats</div></div>
          <div class="genre-card g-rnb" onclick="searchGenre('R&B')"><div class="genre-emoji">üé∂</div><div class="genre-name">R&B / Soul</div></div>
          <div class="genre-card g-electronic" onclick="searchGenre('Electronic')"><div class="genre-emoji">‚ö°</div><div class="genre-name">Electronic</div></div>
          <div class="genre-card g-pop" onclick="searchGenre('Pop')"><div class="genre-emoji">‚ú®</div><div class="genre-name">Pop</div></div>
          <div class="genre-card g-jazz" onclick="searchGenre('Jazz')"><div class="genre-emoji">üé∑</div><div class="genre-name">Jazz</div></div>
          <div class="genre-card g-gospel" onclick="searchGenre('Gospel')"><div class="genre-emoji">‚úùÔ∏è</div><div class="genre-name">Gospel</div></div>
          <div class="genre-card g-highlife" onclick="searchGenre('Highlife')"><div class="genre-emoji">üé∫</div><div class="genre-name">Highlife</div></div>
        </div>
      </div>

      <!-- Search Results -->
      <div id="search-results-view" style="display:none">
        <div class="results-label" id="results-label">Results</div>
        <div id="search-results-list"></div>
      </div>
    </div>

    <!-- ‚ïê‚ïê LIBRARY ‚ïê‚ïê -->
    <div class="screen" id="screen-library">
      <div class="screen-header">
        <div class="screen-title">Library</div>
        <div class="hbtn" onclick="showToast('New playlist ‚Äî coming soon!')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </div>
      </div>
      <div class="lib-tabs" id="lib-tabs">
        <div class="lib-tab active" onclick="switchLibTab(this,'playlists')">Playlists</div>
        <div class="lib-tab" onclick="switchLibTab(this,'albums')">Albums</div>
        <div class="lib-tab" onclick="switchLibTab(this,'artists')">Artists</div>
        <div class="lib-tab" onclick="switchLibTab(this,'downloads')">Downloads</div>
      </div>

      <!-- Playlists -->
      <div id="lib-playlists">
        <div class="playlist-grid">
          <div class="playlist-card" onclick="playTrack(0)">
            <div class="playlist-art" style="background:linear-gradient(135deg,#2a1060,#3a0a70)">
              <div class="art-grid"><div class="art-grid-cell">‚ù§Ô∏è</div><div class="art-grid-cell c-purple" style="opacity:.8">üåô</div><div class="art-grid-cell c-rose" style="opacity:.8">üé∂</div><div class="art-grid-cell c-teal" style="opacity:.8">üåä</div></div>
            </div>
            <div class="playlist-meta"><div class="playlist-title">Liked Songs</div><div class="playlist-count">248 songs</div></div>
          </div>
          <div class="playlist-card" onclick="playTrack(1)">
            <div class="playlist-art" style="background:linear-gradient(135deg,#1a0a4a,#3d1f8e)"><span style="font-size:52px">üåô</span></div>
            <div class="playlist-meta"><div class="playlist-title">Late Night Vibes</div><div class="playlist-count">34 songs</div></div>
          </div>
          <div class="playlist-card" onclick="playTrack(2)">
            <div class="playlist-art" style="background:linear-gradient(135deg,#0a3a1a,#0e5a2a)"><span style="font-size:52px">üåø</span></div>
            <div class="playlist-meta"><div class="playlist-title">Workout Mode</div><div class="playlist-count">52 songs</div></div>
          </div>
          <div class="playlist-card" onclick="playTrack(0)">
            <div class="playlist-art" style="background:linear-gradient(135deg,#3a0a2a,#6a1050)"><span style="font-size:52px">üî•</span></div>
            <div class="playlist-meta"><div class="playlist-title">Afro Bangers</div><div class="playlist-count">67 songs</div></div>
          </div>
          <div class="playlist-card" onclick="playTrack(3)">
            <div class="playlist-art" style="background:linear-gradient(135deg,#0a1a3a,#1a3a6a)"><span style="font-size:52px">üíé</span></div>
            <div class="playlist-meta"><div class="playlist-title">Focus Deep</div><div class="playlist-count">19 songs</div></div>
          </div>
          <div class="playlist-card" style="border:1.5px dashed var(--border2);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px;min-height:195px;opacity:.4" onclick="showToast('Create playlist coming soon!')">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            <div style="font-family:'Syne',sans-serif;font-size:12px;font-weight:700">New Playlist</div>
          </div>
        </div>
      </div>

      <!-- Albums tab placeholder -->
      <div id="lib-albums" style="display:none">
        <div class="h-scroll" style="padding-bottom:14px">
          <div class="album-card" onclick="playTrack(0)"><div class="album-art c-purple">üåô</div><div class="album-name">Midnight Lagos</div><div class="album-artist">Wizkid ¬∑ 2024</div></div>
          <div class="album-card" onclick="playTrack(1)"><div class="album-art c-rose">üî•</div><div class="album-name">Twice As Tall II</div><div class="album-artist">Burna Boy ¬∑ 2024</div></div>
          <div class="album-card" onclick="playTrack(2)"><div class="album-art c-teal">üíé</div><div class="album-name">A Good Time</div><div class="album-artist">Davido ¬∑ 2024</div></div>
        </div>
      </div>
      <div id="lib-artists" style="display:none;padding:0 24px">
        <div style="display:flex;flex-direction:column;gap:4px">
          <div class="track-row" onclick="switchScreen('artist')" style="padding-left:0;padding-right:0">
            <div class="track-thumb c-purple" style="width:52px;height:52px;border-radius:50%">üé§</div>
            <div class="track-info"><div class="track-name">Wizkid</div><div class="track-artist">42.3M monthly listeners</div></div>
          </div>
          <div class="track-row" onclick="switchScreen('artist')" style="padding-left:0;padding-right:0">
            <div class="track-thumb c-rose" style="width:52px;height:52px;border-radius:50%">üéµ</div>
            <div class="track-info"><div class="track-name">Tems</div><div class="track-artist">28.1M monthly listeners</div></div>
          </div>
          <div class="track-row" onclick="switchScreen('artist')" style="padding-left:0;padding-right:0">
            <div class="track-thumb c-teal" style="width:52px;height:52px;border-radius:50%">üé∏</div>
            <div class="track-info"><div class="track-name">Rema</div><div class="track-artist">35.6M monthly listeners</div></div>
          </div>
        </div>
      </div>
      <div id="lib-downloads" style="display:none;padding:40px 24px;text-align:center;color:var(--muted)">
        <div style="font-size:40px;margin-bottom:12px">üì•</div>
        <div style="font-family:'Syne',sans-serif;font-size:16px;font-weight:700;margin-bottom:6px">No Downloads Yet</div>
        <div style="font-size:13px">Save songs to listen offline</div>
      </div>
    </div>

    <!-- ‚ïê‚ïê ARTIST ‚ïê‚ïê -->
    <div class="screen" id="screen-artist">
      <div class="artist-hero">
        <div class="artist-hero-bg">üé§</div>
        <div class="artist-hero-overlay"></div>
        <div class="back-btn" onclick="switchScreen('home')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
        </div>
        <div class="artist-hero-content">
          <div class="artist-verified">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="var(--a3)"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            Verified Artist
          </div>
          <div class="artist-hero-name">Wizkid</div>
          <div class="artist-stats">
            <div class="artist-stat"><span>42.3M</span>Monthly Listeners</div>
            <div class="artist-stat"><span>8.1M</span>Followers</div>
            <div class="artist-stat"><span>12</span>Albums</div>
          </div>
          <div class="artist-actions">
            <button class="btn-play-main" onclick="playTrack(0)">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="white"><polygon points="5,3 19,12 5,21"/></svg>
              Play Artist Mix
            </button>
            <button class="btn-follow" id="follow-btn" onclick="toggleFollow()">Follow</button>
          </div>
        </div>
      </div>

      <div class="section" style="padding-top:16px">
        <div class="section-label">Popular Tracks</div>
        <div class="track-row" onclick="playTrack(0)"><div class="track-num">1</div><div class="track-thumb c-purple">üåô</div><div class="track-info"><div class="track-name">Essence (Remix)</div><div class="track-artist">ft. Justin Bieber ¬∑ 890M plays</div></div><div class="track-dur">3:51</div></div>
        <div class="track-row" onclick="playTrack(3)"><div class="track-num">2</div><div class="track-thumb c-teal">üåä</div><div class="track-info"><div class="track-name">Come Closer</div><div class="track-artist">ft. Drake ¬∑ 620M plays</div></div><div class="track-dur">3:25</div></div>
        <div class="track-row" onclick="playTrack(2)"><div class="track-num">3</div><div class="track-thumb c-rose">üî•</div><div class="track-info"><div class="track-name">Ojuelegba</div><div class="track-artist">480M plays</div></div><div class="track-dur">4:12</div></div>
        <div class="track-row" onclick="playTrack(4)"><div class="track-num">4</div><div class="track-thumb c-gold">‚≠ê</div><div class="track-info"><div class="track-name">Made In Lagos</div><div class="track-artist">360M plays</div></div><div class="track-dur">3:44</div></div>
      </div>

      <div class="section">
        <div class="section-label">Discography</div>
        <div class="h-scroll">
          <div class="album-card" onclick="playTrack(0)"><div class="album-art c-purple">üåô</div><div class="album-name">More Love Less Ego</div><div class="album-artist">2022 ¬∑ Album</div></div>
          <div class="album-card" onclick="playTrack(1)"><div class="album-art c-teal">üåä</div><div class="album-name">Made In Lagos</div><div class="album-artist">2020 ¬∑ Album</div></div>
          <div class="album-card" onclick="playTrack(2)"><div class="album-art c-gold">‚≠ê</div><div class="album-name">Sounds From The Other Side</div><div class="album-artist">2017 ¬∑ Album</div></div>
        </div>
      </div>
    </div>

  </div><!-- /screens -->

  <!-- MINI PLAYER -->
  <div class="mini-player-wrap hidden" id="mini-player-wrap">
    <div class="mini-player" onclick="openPlayer()">
      <div class="mini-progress" id="mini-progress"></div>
      <div class="mini-thumb c-purple" id="mini-thumb">üåô</div>
      <div class="mini-info">
        <div class="mini-track" id="mini-track">Essence (Remix)</div>
        <div class="mini-artist" id="mini-artist">Wizkid ft. Justin Bieber</div>
      </div>
      <div class="mini-controls" onclick="event.stopPropagation()">
        <button class="mini-btn" onclick="prevTrack()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="19,20 9,12 19,4"/><line x1="5" y1="19" x2="5" y2="5"/></svg>
        </button>
        <button class="mini-btn play" id="mini-play-btn" onclick="togglePlay()">
          <svg id="mini-play-icon" width="17" height="17" viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
        </button>
        <button class="mini-btn" onclick="nextTrack()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="5,4 15,12 5,20"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- BOTTOM NAV -->
  <div class="bottom-nav">
    <div class="nav-item active" id="nav-home" onclick="switchScreen('home')">
      <div class="nav-indicator"></div>
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>
      <div class="nav-label">Home</div>
    </div>
    <div class="nav-item" id="nav-search" onclick="switchScreen('search')">
      <div class="nav-indicator"></div>
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <div class="nav-label">Search</div>
    </div>
    <div class="nav-item" id="nav-library" onclick="switchScreen('library')">
      <div class="nav-indicator"></div>
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
      <div class="nav-label">Library</div>
    </div>
    <div class="nav-item" id="nav-artist" onclick="switchScreen('artist')">
      <div class="nav-indicator"></div>
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      <div class="nav-label">Artists</div>
    </div>
  </div>

  <!-- FULL PLAYER -->
  <div class="full-player" id="full-player">
    <div class="fp-handle" onclick="closePlayer()"></div>
    <div class="fp-header">
      <div style="cursor:pointer;color:var(--muted)" onclick="closePlayer()">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
      <div class="fp-header-label">Now Playing</div>
      <div style="cursor:pointer;color:var(--muted)" onclick="showToast('Queue coming soon!')">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="5" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="12" cy="19" r="1"/></svg>
      </div>
    </div>

    <div class="fp-art-wrap">
      <div class="fp-art c-purple playing" id="fp-art">üåô</div>
    </div>

    <div class="fp-meta">
      <div class="fp-track" id="fp-track">Essence (Remix)</div>
      <div class="fp-artist" id="fp-artist">Wizkid ft. Justin Bieber</div>
      <div class="fp-actions">
        <div class="fp-like" id="fp-like" onclick="toggleLike()">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" id="like-icon"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
          <span id="fp-like-count">890M</span>
        </div>
        <div style="display:flex;gap:4px">
          <div class="fp-action-btn" onclick="showToast('Added to playlist! ‚úÖ')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
          </div>
          <div class="fp-action-btn" onclick="showToast('Link copied! üîó')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
          </div>
          <div class="fp-action-btn" onclick="showToast('Downloading... üì•')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          </div>
        </div>
      </div>
    </div>

    <div class="fp-progress-wrap">
      <div class="fp-progress-bar" onclick="seekTrack(event)">
        <div class="fp-progress-fill" id="fp-progress"></div>
      </div>
      <div class="fp-times">
        <span id="fp-current">0:00</span>
        <span id="fp-total">3:51</span>
      </div>
    </div>

    <div class="fp-controls">
      <div class="fp-ctrl-btn active" id="shuffle-btn" onclick="toggleShuffle()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="16,3 21,3 21,8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21,16 21,21 16,21"/><line x1="15" y1="15" x2="21" y2="21"/></svg>
      </div>
      <div class="fp-ctrl-btn" onclick="prevTrack()">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="19,20 9,12 19,4"/><line x1="5" y1="19" x2="5" y2="5"/></svg>
      </div>
      <div class="fp-play-btn" onclick="togglePlay()">
        <svg id="fp-play-icon" width="28" height="28" viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
      </div>
      <div class="fp-ctrl-btn" onclick="nextTrack()">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polygon points="5,4 15,12 5,20"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
      </div>
      <div class="fp-ctrl-btn" id="repeat-btn" onclick="toggleRepeat()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="17,1 21,5 17,9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><polyline points="7,23 3,19 7,15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg>
      </div>
    </div>

    <div class="fp-extras">
      <div class="fp-extra-btn" onclick="showToast('Queue ‚Äî Phase 3!')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6" stroke-width="3"/><line x1="3" y1="12" x2="3.01" y2="12" stroke-width="3"/><line x1="3" y1="18" x2="3.01" y2="18" stroke-width="3"/></svg>
        Queue
      </div>
      <div class="fp-extra-btn" onclick="showToast('üéâ Listen Party ‚Äî Phase 4!')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="2"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.49-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/></svg>
        Listen Party
      </div>
      <div class="fp-extra-btn" onclick="showToast('üìù Lyrics ‚Äî Phase 3!')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg>
        Lyrics
      </div>
      <div class="fp-extra-btn" onclick="showToast('üåä Mood Wave ‚Äî Phase 6!')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/></svg>
        Mood Wave
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="toast" id="toast"></div>

</div><!-- /shell -->

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const TRACKS = [
  {name:'Essence (Remix)',artist:'Wizkid ft. Justin Bieber',emoji:'üåô',bg:'c-purple',duration:231},
  {name:'Last Last',artist:'Burna Boy',emoji:'üî•',bg:'c-rose',duration:213},
  {name:'Calm Down',artist:'Rema ft. Selena Gomez',emoji:'üíé',bg:'c-teal',duration:239},
  {name:'Come Closer',artist:'Mr Eazi ft. Drake',emoji:'üåä',bg:'c-gold',duration:205},
  {name:'Soso',artist:'Omah Lay',emoji:'üåø',bg:'c-green',duration:198},
  {name:'Rush',artist:'Ayra Starr',emoji:'‚ú®',bg:'c-pink',duration:174},
  {name:'Terminator',artist:'Asake',emoji:'‚ö°',bg:'c-blue',duration:188},
];

const SEARCH_DATA = [
  ...TRACKS,
  {name:'Ojuelegba',artist:'Wizkid',emoji:'üéµ',bg:'c-purple',duration:252},
  {name:'Twice As Tall',artist:'Burna Boy',emoji:'üåç',bg:'c-rose',duration:243},
  {name:'Ye',artist:'Burna Boy',emoji:'üîÆ',bg:'c-rose',duration:198},
  {name:'Amapiano Mix',artist:'DJ Maphorisa',emoji:'üéπ',bg:'c-teal',duration:320},
  {name:'Overdue',artist:'Tems',emoji:'üå∏',bg:'c-pink',duration:210},
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// AUTH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let currentUser = JSON.parse(localStorage.getItem('adverse_user') || 'null');

function init() {
  updateClock();
  setInterval(updateClock, 1000);
  if (currentUser) {
    showApp();
  }
  // keyboard enter support
  document.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      const af = document.getElementById('login-form');
      if (af && af.style.display !== 'none') doLogin();
      else doSignup();
    }
  });
}

function switchAuthTab(tab) {
  document.querySelectorAll('.auth-tab').forEach((t,i) => {
    t.classList.toggle('active', (i===0&&tab==='login')||(i===1&&tab==='signup'));
  });
  document.getElementById('login-form').style.display = tab==='login'?'flex':'none';
  document.getElementById('signup-form').style.display = tab==='signup'?'flex':'none';
}

function togglePw(id, btn) {
  const inp = document.getElementById(id);
  const isText = inp.type === 'text';
  inp.type = isText ? 'password' : 'text';
  btn.style.opacity = isText ? '1' : '.5';
}

function doLogin() {
  const email = document.getElementById('login-email').value.trim();
  const pass = document.getElementById('login-password').value;
  const err = document.getElementById('login-error');
  const btn = document.getElementById('login-btn');
  err.classList.remove('show');

  if (!email || !pass) { err.textContent='Please fill in all fields.'; err.classList.add('show'); return; }
  if (!email.includes('@')) { err.textContent='Enter a valid email address.'; err.classList.add('show'); return; }

  btn.innerHTML = '<div class="spinner"></div>';
  btn.disabled = true;

  setTimeout(() => {
    // Check stored users
    const users = JSON.parse(localStorage.getItem('adverse_users') || '[]');
    const user = users.find(u => u.email === email);
    if (user && user.password === pass) {
      loginSuccess(user);
    } else if (email && pass.length >= 3) {
      // Demo: allow any valid-looking credentials
      loginSuccess({name: email.split('@')[0], email});
    } else {
      err.textContent = 'Invalid email or password.';
      err.classList.add('show');
      btn.innerHTML = 'Sign In';
      btn.disabled = false;
    }
  }, 1200);
}

function doSignup() {
  const name = document.getElementById('signup-name').value.trim();
  const email = document.getElementById('signup-email').value.trim();
  const pass = document.getElementById('signup-password').value;
  const err = document.getElementById('signup-error');
  const succ = document.getElementById('signup-success');
  const btn = document.getElementById('signup-btn');

  err.classList.remove('show'); succ.classList.remove('show');
  if (!name) { err.textContent='Please enter your name.'; err.classList.add('show'); return; }
  if (!email.includes('@')) { err.textContent='Enter a valid email.'; err.classList.add('show'); return; }
  if (pass.length < 8) { err.textContent='Password must be at least 8 characters.'; err.classList.add('show'); return; }

  btn.innerHTML = '<div class="spinner"></div>';
  btn.disabled = true;

  setTimeout(() => {
    const users = JSON.parse(localStorage.getItem('adverse_users') || '[]');
    if (users.find(u => u.email === email)) {
      err.textContent = 'An account with this email already exists.';
      err.classList.add('show');
      btn.innerHTML = 'Create Account';
      btn.disabled = false;
      return;
    }
    const user = {name, email, password: pass};
    users.push(user);
    localStorage.setItem('adverse_users', JSON.stringify(users));
    succ.classList.add('show');
    setTimeout(() => loginSuccess(user), 1000);
  }, 1200);
}

function socialLogin(provider) {
  showToast(`${provider} login ‚Äî coming soon!`);
}

function loginSuccess(user) {
  currentUser = user;
  localStorage.setItem('adverse_user', JSON.stringify(user));
  showApp();
}

function showApp() {
  document.getElementById('auth-screen').classList.add('hidden');
  document.getElementById('main-app').style.display = 'flex';
  const name = currentUser.name || 'There';
  const firstName = name.split(' ')[0];
  document.getElementById('home-greeting').innerHTML = `${firstName} <span style="background:linear-gradient(135deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent">‚ú¶</span>`;
  document.getElementById('home-avatar').textContent = firstName[0].toUpperCase();
  document.getElementById('home-uname').textContent = firstName;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let currentScreen = 'home';

function switchScreen(name) {
  const prev = document.getElementById('screen-' + currentScreen);
  prev.classList.remove('active');
  prev.classList.add('exit-left');
  setTimeout(() => prev.classList.remove('exit-left'), 350);

  document.getElementById('screen-' + name).classList.add('active');
  currentScreen = name;

  document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
  const navEl = document.getElementById('nav-' + name);
  if (navEl) navEl.classList.add('active');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PLAYER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let currentTrackIdx = 0;
let isPlaying = false;
let progressInterval = null;
let currentSeconds = 0;
let isLiked = false;
let isShuffle = false;
let isRepeat = false;

function playTrack(idx) {
  currentTrackIdx = idx;
  const t = TRACKS[idx];
  currentSeconds = 0;

  // Update UI
  document.getElementById('mini-thumb').className = `mini-thumb ${t.bg}`;
  document.getElementById('mini-thumb').textContent = t.emoji;
  document.getElementById('mini-track').textContent = t.name;
  document.getElementById('mini-artist').textContent = t.artist;
  document.getElementById('fp-art').className = `fp-art ${t.bg} playing`;
  document.getElementById('fp-art').textContent = t.emoji;
  document.getElementById('fp-track').textContent = t.name;
  document.getElementById('fp-artist').textContent = t.artist;
  document.getElementById('fp-total').textContent = formatTime(t.duration);

  // Show mini player
  document.getElementById('mini-player-wrap').classList.remove('hidden');
  isPlaying = true;
  updatePlayIcons();
  startProgress();
  openPlayer();
}

function togglePlay() {
  isPlaying = !isPlaying;
  updatePlayIcons();
  if (isPlaying) startProgress(); else clearInterval(progressInterval);
}

function updatePlayIcons() {
  const pauseSVG = `<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>`;
  const playSVG = `<polygon points="5,3 19,12 5,21"/>`;
  const svg = isPlaying ? pauseSVG : playSVG;
  document.getElementById('mini-play-icon').innerHTML = svg;
  document.getElementById('fp-play-icon').innerHTML = svg;
  document.getElementById('fp-art').classList.toggle('playing', isPlaying);
}

function startProgress() {
  clearInterval(progressInterval);
  const t = TRACKS[currentTrackIdx];
  progressInterval = setInterval(() => {
    if (!isPlaying) return;
    currentSeconds++;
    if (currentSeconds >= t.duration) {
      if (isRepeat) { currentSeconds = 0; }
      else { nextTrack(); return; }
    }
    const pct = (currentSeconds / t.duration) * 100;
    document.getElementById('fp-progress').style.width = pct + '%';
    document.getElementById('mini-progress').style.width = pct + '%';
    document.getElementById('fp-current').textContent = formatTime(currentSeconds);
  }, 1000);
}

function seekTrack(e) {
  const bar = e.currentTarget;
  const rect = bar.getBoundingClientRect();
  const pct = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
  currentSeconds = Math.floor(pct * TRACKS[currentTrackIdx].duration);
}

function nextTrack() {
  const next = isShuffle
    ? Math.floor(Math.random() * TRACKS.length)
    : (currentTrackIdx + 1) % TRACKS.length;
  playTrack(next);
}

function prevTrack() {
  if (currentSeconds > 3) { currentSeconds = 0; return; }
  const prev = (currentTrackIdx - 1 + TRACKS.length) % TRACKS.length;
  playTrack(prev);
}

function toggleLike() {
  isLiked = !isLiked;
  const icon = document.getElementById('like-icon');
  const el = document.getElementById('fp-like');
  el.classList.toggle('liked', isLiked);
  icon.style.fill = isLiked ? '#ff5577' : 'none';
  icon.style.stroke = isLiked ? '#ff5577' : 'currentColor';
  showToast(isLiked ? '‚ù§Ô∏è Added to Liked Songs' : 'Removed from Liked Songs');
}

function toggleShuffle() {
  isShuffle = !isShuffle;
  document.getElementById('shuffle-btn').classList.toggle('active', isShuffle);
  showToast(isShuffle ? 'üîÄ Shuffle On' : 'Shuffle Off');
}

function toggleRepeat() {
  isRepeat = !isRepeat;
  document.getElementById('repeat-btn').classList.toggle('active', isRepeat);
  showToast(isRepeat ? 'üîÅ Repeat On' : 'Repeat Off');
}

function openPlayer() { document.getElementById('full-player').classList.add('open'); }
function closePlayer() { document.getElementById('full-player').classList.remove('open'); }

// Swipe down to close
let touchStartY = 0;
document.getElementById('full-player').addEventListener('touchstart', e => { touchStartY = e.touches[0].clientY; });
document.getElementById('full-player').addEventListener('touchend', e => {
  if (e.changedTouches[0].clientY - touchStartY > 90) closePlayer();
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SEARCH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let searchTimeout = null;

function doSearch(query) {
  const clear = document.getElementById('search-clear');
  const browse = document.getElementById('browse-view');
  const results = document.getElementById('search-results-view');
  const label = document.getElementById('results-label');
  const list = document.getElementById('search-results-list');

  clear.classList.toggle('visible', query.length > 0);

  if (!query.trim()) {
    browse.style.display = '';
    results.style.display = 'none';
    return;
  }

  browse.style.display = 'none';
  results.style.display = '';

  clearTimeout(searchTimeout);
  list.innerHTML = '<div style="padding:24px;text-align:center"><div class="spinner"></div></div>';

  searchTimeout = setTimeout(() => {
    const q = query.toLowerCase();
    const found = SEARCH_DATA.filter(t =>
      t.name.toLowerCase().includes(q) || t.artist.toLowerCase().includes(q)
    );
    label.textContent = found.length ? `${found.length} Result${found.length!==1?'s':''}` : 'No results';

    if (!found.length) {
      list.innerHTML = `<div class="no-results"><span class="emoji">üîç</span>No results for "<strong>${query}</strong>"<br><br>Try a different song or artist</div>`;
      return;
    }

    list.innerHTML = found.map((t, i) => `
      <div class="track-row" onclick="playSearchTrack(${SEARCH_DATA.indexOf(t)})">
        <div class="track-thumb ${t.bg}">${t.emoji}</div>
        <div class="track-info">
          <div class="track-name">${highlight(t.name, q)}</div>
          <div class="track-artist">${highlight(t.artist, q)}</div>
        </div>
        <div class="track-dur">${formatTime(t.duration)}</div>
      </div>
    `).join('');
  }, 350);
}

function highlight(text, query) {
  const idx = text.toLowerCase().indexOf(query);
  if (idx < 0) return text;
  return text.slice(0,idx) + `<span style="color:var(--a1);font-weight:700">${text.slice(idx, idx+query.length)}</span>` + text.slice(idx+query.length);
}

function clearSearch() {
  document.getElementById('search-input').value = '';
  doSearch('');
  document.getElementById('search-input').focus();
}

function searchGenre(genre) {
  document.getElementById('search-input').value = genre;
  doSearch(genre);
}

function playSearchTrack(idx) {
  const t = SEARCH_DATA[idx];
  // Map to TRACKS or use data directly
  const mapped = TRACKS.findIndex(tr => tr.name === t.name);
  if (mapped >= 0) playTrack(mapped);
  else {
    // Play from search data
    TRACKS.push(t);
    playTrack(TRACKS.length - 1);
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// LIBRARY TABS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function switchLibTab(el, tab) {
  document.querySelectorAll('.lib-tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
  ['playlists','albums','artists','downloads'].forEach(t => {
    const el = document.getElementById('lib-' + t);
    if (el) el.style.display = t === tab ? '' : 'none';
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ARTIST FOLLOW
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let isFollowing = false;
function toggleFollow() {
  isFollowing = !isFollowing;
  const btn = document.getElementById('follow-btn');
  btn.textContent = isFollowing ? 'Following ‚úì' : 'Follow';
  btn.classList.toggle('following', isFollowing);
  showToast(isFollowing ? '‚úÖ Following Wizkid' : 'Unfollowed Wizkid');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UTILS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function formatTime(s) {
  const m = Math.floor(s / 60);
  const sec = s % 60;
  return `${m}:${sec.toString().padStart(2,'0')}`;
}

let toastTimer = null;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 2200);
}

function updateClock() {
  const now = new Date();
  const h = now.getHours(), m = now.getMinutes();
  document.getElementById('status-time').textContent = `${h}:${m.toString().padStart(2,'0')}`;
}

// Greet based on time
function updateGreeting() {
  const h = new Date().getHours();
  const greet = h < 12 ? 'Good morning' : h < 17 ? 'Good afternoon' : 'Good evening';
  const el = document.querySelector('#screen-home .screen-header > div > div:first-child');
  if (el) el.textContent = greet;
}

init();
updateGreeting();
</script>
</body>
</html>
